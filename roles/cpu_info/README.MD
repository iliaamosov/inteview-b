Описание
Таска собирает информацию с хота, сохраняет её в файл на удалённой машине и затем скачивает этот файл на локальную машину 
Вся информация сохраняется в файле cpu_info.txt на локальной машине, путь: your_path/cpu_info.txt.

Почему сделал так - локально не отрабатывал stdout, более простая версия лежит ниже




Структура:


1. Получение информации о процессоре
Задача: Запуск команды lscpu 

Описание:
Задача использует команду lscpu
Результат выполнения сохраняется в переменной cpu_info


2. Проверка вывода команды lscpu
Задача: Выводим в консоль результат работы команды lscpu для проверки

В этой задаче выводится содержимое переменной cpu_info.stdout, чтобы убедиться, что данные были собраны корректно


3. Сохранение информации о процессоре во временный файл
Задача: Сохраняем информацию о процессоре в файл на сервере

Описание:
Используется команда echo для записи информации о процессоре в файл /home/ubuntu/cpu_info.txt на сервере
Этот файл будет использоваться для дальнейшей передачи данных на локальную машину


4. Проверка создания файла на сервере
Задача: Проверяем, что файл был успешно создан на сервере

Описание:
В этой задаче мы проверяем, существует ли файл на сервере.
Результат проверяется с помощью команды ls -l /home/ubuntu/cpu_info.txt



5. Вывод информации о проверке файла
Задача: Отображаем результат проверки наличия файла


Описание:
Выводим результат команды ls -l для проверки наличия файла на сервере
В случае успешного создания файла, в выводе будет информация о файле: его размер и дата создания


6. Скачивание файла на локальную машину

Описание:
Эта задача использует  fetch для скачивания файла с сервера на локальную машину
Файл будет сохранён по пути: your_path/cpu_info.txt



7. Проверка скачанного файла на локальной машине
Задача: Проверяем, что файл был скачан на локальную машину



Для запуска плейбука используйте команду:

ansible-playbook -i inventory/hosts.ini playbook.yml --tags cpu_info 





первая и простая версия
---
- name: Получение информации о процессоре
  hosts: servers
  become: yes
  tasks:
    - name: Запустить lscpu
      command: lscpu
      register: cpu_info
      changed_when: false

    - name: Вывести результат lscpu
      debug:
        var: cpu_info.stdout
